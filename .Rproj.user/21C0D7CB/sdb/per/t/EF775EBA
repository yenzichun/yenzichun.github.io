{
    "collab_server" : "",
    "contents" : "---\nlayout: post\ntitle:  shiny and highcharts\ndate: \"`r Sys.time()`\"\npublished: true\ntags: [example1, example2]\nruntime: shiny\n---\n\n\n```{r include=FALSE}\nlibrary(\"shiny\")\nlibrary(\"highcharter\")\nload(file = \"ems_city_group_data.rda\")\n```\n\nhear's a shiny app using highcharter package.\n\n```{r, echo = FALSE}\n\nshinyApp(\n  ui = fluidPage(\n  navbarPage( \"EMS Project\",\n        tabPanel(\"tab 1\",\n                  wellPanel(\n                    highchartOutput(\"hcontainer1\")\n                  )\n        ),\n        \n        tabPanel(\"tab 2\",\n                 wellPanel(\n                   highchartOutput(\"hcontainer2\")\n                 )\n        )\n  )      \n),\n\n# Server function\nserver = function(input, output, session) {\n  require(\"highcharter\")\n  require(\"dplyr\")\n  l1 <- city_group_count %>% filter(yy==2007)\n  l2 <- city_group_count %>% filter(yy==2008)\n  l3 <- city_group_count %>% filter(yy==2009)\n  l4 <- city_group_count %>% filter(yy==2010)\n  l5 <- city_group_count %>% filter(yy==2011)\n  l6 <- city_group_count %>% filter(yy==2012)\n  l7 <- city_group_count %>% filter(yy==2013)\n  citylist <- levels(as.factor(city_group_count$city2))\n  \n  yrlist <- paste0(levels(as.factor(city_group_count$yy)),\"yr\")\n  Encoding(yrlist) <- \"CP950\" ## 轉成正常中文\n  yrlist <- iconv(yrlist,\"CP950\",\"UTF-8\")\n  \n  require(\"tidyr\")\n  y <- city_group_count %>% spread(.,city2,count)\n  colnames(y) <- rep(letters,1,length(names(y)))\n  \n  output$hcontainer1 <- renderHighchart({\n    \n    highchart() %>%\n      hc_chart(type = \"column\") %>%\n      hc_title(text = \"stacked column chart\") %>%\n      hc_xAxis( categories = citylist) %>%\n      hc_yAxis( stackLabels = list( enabled = TRUE)) %>%\n      hc_plotOptions( column = list( stacking = \"normal\")) %>%\n      hc_add_series(name=yrlist[7],data = l7$count) %>%\n      hc_add_series(name=yrlist[6],data = l6$count) %>%\n      hc_add_series(name=yrlist[5],data = l5$count) %>%\n      hc_add_series(name=yrlist[4],data = l4$count) %>%\n      hc_add_series(name=yrlist[3],data = l3$count) %>%\n      hc_add_series(name=yrlist[2],data = l2$count) %>%\n      hc_add_series(name=yrlist[1],data = l1$count)\n    \n  })\n\n  output$hcontainer2 <- renderHighchart({\n\n    highchart() %>%\n      hc_chart(type = \"column\") %>%\n      hc_title(text = \"stacked column chart\") %>%\n      hc_xAxis( categories = yrlist) %>%\n      hc_yAxis( stackLabels = list( enabled = TRUE)) %>%\n      hc_plotOptions( column = list( stacking = \"normal\")) %>%\n      hc_add_series(name=citylist[1],data = y$b) %>%\n      hc_add_series(name=citylist[2],data = y$c) %>%\n      hc_add_series(name=citylist[3],data = y$d) %>%\n      hc_add_series(name=citylist[4],data = y$e) %>%\n      hc_add_series(name=citylist[5],data = y$f) %>%\n      hc_add_series(name=citylist[6],data = y$g) %>%\n      hc_add_series(name=citylist[7],data = y$h) %>%\n      hc_add_series(name=citylist[8],data = y$i) %>%\n      hc_add_series(name=citylist[9],data = y$j) %>%\n      hc_add_series(name=citylist[10],data = y$k) %>%\n      hc_add_series(name=citylist[11],data = y$l) %>%\n      hc_add_series(name=citylist[12],data = y$m) %>%\n      hc_add_series(name=citylist[13],data = y$n) %>%\n      hc_add_series(name=citylist[14],data = y$o) %>%\n      hc_add_series(name=citylist[15],data = y$p) %>%\n      hc_add_series(name=citylist[16],data = y$q) %>%\n      hc_add_series(name=citylist[17],data = y$r) %>%\n      hc_add_series(name=citylist[18],data = y$s) %>%\n      hc_add_series(name=citylist[19],data = y$t) %>%\n      hc_add_series(name=citylist[20],data = y$u) %>%\n      hc_add_series(name=citylist[21],data = y$v) %>%\n      hc_add_series(name=citylist[22],data = y$w)\n\n  })\n},\noptions = list(height = 600)\n  \n)\n```\n",
    "created" : 1474582044097.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2036717735",
    "id" : "EF775EBA",
    "lastKnownWriteTime" : 1474582812,
    "last_content_update" : 1474582812122,
    "path" : "C:/Github/yenzichun.github.io/_source/shiny-and-highcharts/2016-09-23-shiny-and-highcharts.Rmd",
    "project_path" : "_source/shiny-and-highcharts/2016-09-23-shiny-and-highcharts.Rmd",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}